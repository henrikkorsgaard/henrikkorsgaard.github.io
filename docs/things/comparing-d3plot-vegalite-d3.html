<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Henrik Korsgaard - Comparing Observable Plot, Vega-lite API and D3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="../css/styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../" class="navbar-brand navbar-brand-logo">
    <img src="../public/images/henrik-transparent.png" alt="" class="navbar-logo">
    </a>
  </div>
          <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../notes.html">
 <span class="menu-text">NOTES</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../things.html">
 <span class="menu-text">THINGS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html">
 <span class="menu-text">RESEARCH</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">ABOUT</span></a>
  </li>  
</ul>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Comparing Observable Plot, Vega-lite API and D3</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>I love the availability of public open data in Denmark and need a way to visualise these for multiple projects. I have a couple of (conflicting) requirements to consider when selecting a library for data visualizations.</p>
<ul>
<li><strong>Developer usability</strong>: I do not want to wrangle both data and a library. A library need to feel usable and productive from the get go without having to go through too much trial-and-error to get a simple experiment work. This also require good consistent documentation.</li>
<li><strong>Developer investment</strong>: I do not want to invest hours upon hours into a very idosyncratic way of developing. There should be a clear link between output, productivity and investment.</li>
<li><strong>Effeciency</strong>: I want to be able to move from idea to data to visualization fast</li>
<li><strong>Customization</strong>: … with good options for tailorability</li>
<li><strong>Transparency</strong>: I am a firm believer in transparency from visualisation, through code and wrangling, to the data. It should neiter be too obscure or black-boxed for others to be unable to critique or learn from what I produce.</li>
<li><strong>Visualisation usability</strong>: It needs to produce visualisations that adhere to usability criteria from both Human-Computer Interaction and Information Visualisation out of the box.</li>
<li><strong>Visual look</strong>: They need to produce visualisations that look nice. I do not want to wrangle with both data, library and styling.</li>
</ul>
<p>I also have a small list of additional requirments supporting a production, collaboration and sharing pipeline, but I have not yet formulated these. So that will be a thing for a later post.</p>
<p>The best way to figure out which libraries that fit my needs is to make a few examples to get a feel for the flow, constructs, documentation and hurdles. In this post I will explore <a href="https://github.com/observablehq/plot">Observable Plot</a>, <a href="https://vega.github.io/vega-lite-api/">Vega-lite API</a>, <a href="https://github.com/vega/vega">vega</a> and <a href="https://d3js.org/">D3</a>.</p>
<section id="line-graph-visualisation" class="level2">
<h2 class="anchored" data-anchor-id="line-graph-visualisation">Line graph visualisation</h2>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>I will be using population data from the <a href="https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3">Danish Statistical Service</a> to generate a simple line chart.</p>
<div class="cell" data-output="all">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" data-startfrom="26" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 25;"><span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"/public/data/dk-population-1901-2022.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({<span class="dt">typed</span><span class="op">:</span><span class="kw">true</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="observable-plot" class="level3">
<h3 class="anchored" data-anchor-id="observable-plot">Observable Plot</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" data-startfrom="33" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 32;"><span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span><span class="dv">900</span><span class="op">,</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span><span class="dv">400</span><span class="op">,</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        <span class="dt">ticks</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tickFormat</span><span class="op">:</span> <span class="kw">function</span>(d){<span class="cf">return</span> <span class="st">""</span><span class="op">+</span>d}<span class="op">,</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        <span class="dt">domain</span><span class="op">:</span> [<span class="dv">1900</span><span class="op">,</span> <span class="dv">2025</span>]<span class="op">,</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>        <span class="dt">label</span><span class="op">:</span> <span class="st">"Population (in 1000s)"</span><span class="op">,</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>        <span class="dt">domain</span><span class="op">:</span> [<span class="dv">2000</span><span class="op">,</span><span class="dv">6000</span>]</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">caption</span><span class="op">:</span> <span class="fu">html</span><span class="vs">`Figure 1. Danish population growth from 1901 to 2022. Source: &lt;a href="https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3" target="new"&gt;Danish statistical service&lt;/a&gt;.`</span><span class="op">,</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">line</span>(data<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"population"</span>})<span class="op">,</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="vega-lite-api" class="level3">
<h3 class="anchored" data-anchor-id="vega-lite-api">Vega Lite API</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" data-startfrom="59" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 58;"><span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { vl } <span class="im">from</span> <span class="st">"@vega/vega-lite-api"</span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>vl<span class="op">.</span><span class="fu">markLine</span>()</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(data)</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">title</span>({<span class="st">"text"</span><span class="op">:</span> <span class="st">"Figure 2: Danish population growth from 1901 to 2022."</span><span class="op">,</span> <span class="dt">subtitle</span><span class="op">:</span> <span class="st">'Source: https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3'</span> })<span class="op">.</span><span class="fu">encode</span>(</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">x</span>()<span class="op">.</span><span class="fu">fieldQ</span>(<span class="st">"year"</span>)<span class="op">.</span><span class="fu">scale</span>({<span class="st">"domain"</span><span class="op">:</span> [<span class="dv">1900</span><span class="op">,</span> <span class="dv">2025</span>]})<span class="op">,</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>    vl<span class="op">.</span><span class="fu">y</span>()<span class="op">.</span><span class="fu">fieldQ</span>(<span class="st">"population"</span>)<span class="op">.</span><span class="fu">title</span>(<span class="st">"Population (1000s)"</span>)<span class="op">.</span><span class="fu">scale</span>({<span class="st">"domain"</span><span class="op">:</span> [<span class="dv">2000</span><span class="op">,</span> <span class="dv">6000</span>]})</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>)<span class="op">.</span><span class="fu">width</span>(<span class="dv">780</span>)<span class="op">.</span><span class="fu">height</span>(<span class="dv">400</span>)<span class="op">.</span><span class="fu">config</span>({</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>        <span class="dt">axisX</span><span class="op">:</span> {<span class="dt">tickCount</span><span class="op">:</span><span class="dv">10</span><span class="op">,</span> <span class="dt">formatType</span><span class="op">:</span><span class="st">"number"</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span><span class="st">"c"</span>}<span class="op">,</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>})<span class="op">.</span><span class="fu">render</span>({ <span class="dt">renderer</span><span class="op">:</span> <span class="st">"svg"</span> })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</section>
<section id="vega" class="level3">
<h3 class="anchored" data-anchor-id="vega">Vega</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" data-startfrom="73" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 72;"><span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>vega <span class="op">=</span> <span class="pp">require</span>(<span class="st">"@observablehq/vega"</span>)</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a><span class="fu">vega</span>({</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>  <span class="dt">$schema</span><span class="op">:</span> <span class="st">"https://vega.github.io/schema/vega/v5.json"</span><span class="op">,</span></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>  <span class="dt">description</span><span class="op">:</span> <span class="st">"DK Population Growth 1901 - 2022"</span><span class="op">,</span></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">780</span><span class="op">,</span></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>  <span class="dt">padding</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Danish population growth from 1901 to 2022"</span><span class="op">,</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>  <span class="dt">subtitle</span><span class="op">:</span> <span class="st">"Source: https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3"</span><span class="op">,</span></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>  <span class="dt">data</span><span class="op">:</span> [{<span class="dt">name</span><span class="op">:</span> <span class="st">"DK Population 1901 - 2022"</span><span class="op">,</span> <span class="dt">values</span><span class="op">:</span> data}]<span class="op">,</span></span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>  <span class="dt">axes</span><span class="op">:</span> [</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">orient</span><span class="op">:</span> <span class="st">"bottom"</span><span class="op">,</span> <span class="dt">scale</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">values</span><span class="op">:</span><span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">13</span>}<span class="op">,</span> (x<span class="op">,</span> i) <span class="kw">=&gt;</span> <span class="dv">1900</span> <span class="op">+</span> i<span class="op">*</span><span class="dv">10</span>)<span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>      {<span class="dt">orient</span><span class="op">:</span> <span class="st">"left"</span><span class="op">,</span> <span class="dt">scale</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">title</span><span class="op">:</span> <span class="st">"Population (in 1000s)"</span>}</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>  <span class="dt">scales</span><span class="op">:</span> [</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>          <span class="dt">name</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>          <span class="dt">type</span><span class="op">:</span> <span class="st">"point"</span><span class="op">,</span></span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>          <span class="dt">nice</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span></span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>          <span class="dt">range</span><span class="op">:</span> <span class="st">"width"</span><span class="op">,</span></span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>          <span class="dt">domain</span><span class="op">:</span> {<span class="dt">data</span><span class="op">:</span><span class="st">"DK Population 1901 - 2022"</span><span class="op">,</span><span class="dt">field</span><span class="op">:</span><span class="st">"year"</span>}<span class="op">,</span></span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>          <span class="dt">domainMin</span><span class="op">:</span> <span class="dv">1900</span></span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a>          <span class="dt">name</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>          <span class="dt">type</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>          <span class="dt">range</span><span class="op">:</span> <span class="st">"height"</span><span class="op">,</span></span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>          <span class="dt">domain</span><span class="op">:</span> {<span class="dt">data</span><span class="op">:</span><span class="st">"DK Population 1901 - 2022"</span><span class="op">,</span><span class="dt">field</span><span class="op">:</span><span class="st">"population"</span>}<span class="op">,</span></span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>          <span class="dt">domainMin</span><span class="op">:</span> <span class="dv">2000</span><span class="op">,</span></span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>          <span class="dt">domainMax</span><span class="op">:</span> <span class="dv">6000</span></span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>          <span class="dt">type</span><span class="op">:</span> <span class="st">"line"</span><span class="op">,</span></span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>          <span class="dt">from</span><span class="op">:</span> {<span class="dt">data</span><span class="op">:</span> <span class="st">"DK Population 1901 - 2022"</span>}<span class="op">,</span></span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>          <span class="dt">encode</span><span class="op">:</span> {</span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a>              <span class="dt">enter</span><span class="op">:</span> {</span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">x</span><span class="op">:</span> {<span class="dt">scale</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">field</span><span class="op">:</span> <span class="st">"year"</span>}<span class="op">,</span></span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">y</span><span class="op">:</span> {<span class="dt">scale</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">field</span><span class="op">:</span> <span class="st">"population"</span>}<span class="op">,</span></span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">stoke</span><span class="op">:</span> <span class="st">"darkblue"</span><span class="op">,</span></span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">strokeWidth</span><span class="op">:</span> {<span class="st">"value"</span><span class="op">:</span> <span class="dv">2</span>}</span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</section>
<section id="d3" class="level3">
<h3 class="anchored" data-anchor-id="d3">D3</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" data-startfrom="127" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 126;"><span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a>linechart <span class="op">=</span> {</span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> width <span class="op">=</span> <span class="dv">900</span><span class="op">,</span>height <span class="op">=</span> <span class="dv">480</span><span class="op">,</span> margin <span class="op">=</span> <span class="dv">80</span><span class="op">,</span> offset <span class="op">=</span> margin<span class="op">/</span><span class="dv">2</span></span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> xScale <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()<span class="op">.</span><span class="fu">domain</span>([<span class="dv">1900</span><span class="op">,</span><span class="dv">2030</span>])<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> width<span class="op">-</span>margin])<span class="op">;</span></span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> yScale <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()<span class="op">.</span><span class="fu">domain</span>([<span class="dv">2000</span><span class="op">,</span><span class="dv">6000</span>])<span class="op">.</span><span class="fu">range</span>([height<span class="op">-</span>margin<span class="op">,</span> <span class="dv">0</span>])<span class="op">;</span></span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> line <span class="op">=</span> d3<span class="op">.</span><span class="fu">line</span>()</span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">x</span>(<span class="kw">function</span>(d) {</span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">xScale</span>(d<span class="op">.</span><span class="at">year</span>)<span class="op">;</span></span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">y</span>(<span class="kw">function</span>(d) {</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fu">yScale</span>(d<span class="op">.</span><span class="at">population</span>)<span class="op">;</span></span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">gridY</span>(){</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> d3<span class="op">.</span><span class="fu">axisLeft</span>(yScale)<span class="op">.</span><span class="fu">ticks</span>(<span class="dv">10</span>)</span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">gridX</span>(){</span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> d3<span class="op">.</span><span class="fu">axisBottom</span>(xScale)<span class="op">.</span><span class="fu">ticks</span>(<span class="dv">10</span>)</span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">'svg'</span>)</span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height)</span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> width<span class="op">,</span> height])</span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"style"</span><span class="op">,</span> <span class="st">"max-width: 100%; height: auto; height: intrinsic;"</span>)<span class="op">;</span></span>
<span id="cb5-155"><a href="#cb5-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-156"><a href="#cb5-156" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb5-157"><a href="#cb5-157" aria-hidden="true" tabindex="-1"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span>&nbsp;<span class="st">"translate("</span><span class="op">+</span>offset<span class="op">+</span><span class="st">","</span>&nbsp;<span class="op">+</span><span class="fu">&nbsp;</span>(height<span class="op">-</span>offset)&nbsp;<span class="op">+</span>&nbsp;<span class="st">")"</span>)</span>
<span id="cb5-158"><a href="#cb5-158" aria-hidden="true" tabindex="-1"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisBottom</span>(xScale)<span class="op">.</span><span class="fu">tickFormat</span>(<span class="kw">function</span>(d<span class="op">,</span> i){</span>
<span id="cb5-159"><a href="#cb5-159" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> d</span>
<span id="cb5-160"><a href="#cb5-160" aria-hidden="true" tabindex="-1"></a>        }))</span>
<span id="cb5-161"><a href="#cb5-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-162"><a href="#cb5-162" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb5-163"><a href="#cb5-163" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span>&nbsp;<span class="st">"translate("</span>&nbsp;<span class="op">+</span><span class="fu">&nbsp;</span>(offset)&nbsp;<span class="op">+</span>&nbsp;<span class="st">", "</span><span class="op">+</span> offset <span class="op">+</span> <span class="st">" )"</span>)</span>
<span id="cb5-164"><a href="#cb5-164" aria-hidden="true" tabindex="-1"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisLeft</span>(yScale))</span>
<span id="cb5-165"><a href="#cb5-165" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(g <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb5-166"><a href="#cb5-166" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="op">-</span>offset)</span>
<span id="cb5-167"><a href="#cb5-167" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> <span class="op">-</span><span class="dv">20</span>)</span>
<span id="cb5-168"><a href="#cb5-168" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"currentColor"</span>)</span>
<span id="cb5-169"><a href="#cb5-169" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"start"</span>)</span>
<span id="cb5-170"><a href="#cb5-170" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="st">"1.5em"</span>)</span>
<span id="cb5-171"><a href="#cb5-171" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">text</span>(<span class="st">"Population (in 1000s)"</span>))<span class="op">;</span></span>
<span id="cb5-172"><a href="#cb5-172" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-173"><a href="#cb5-173" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb5-174"><a href="#cb5-174" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span>&nbsp;<span class="st">"translate("</span>&nbsp;<span class="op">+</span><span class="fu">&nbsp;</span>(offset)&nbsp;<span class="op">+</span>&nbsp;<span class="st">", "</span><span class="op">+</span> offset <span class="op">+</span> <span class="st">" )"</span>)</span>
<span id="cb5-175"><a href="#cb5-175" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-opacity"</span><span class="op">,</span> <span class="fl">0.2</span>)</span>
<span id="cb5-176"><a href="#cb5-176" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="fl">0.5</span>)</span>
<span id="cb5-177"><a href="#cb5-177" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(<span class="fu">gridY</span>()<span class="op">.</span><span class="fu">tickSize</span>(<span class="op">-</span>(width<span class="op">-</span>margin))</span>
<span id="cb5-178"><a href="#cb5-178" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">tickFormat</span>(<span class="st">""</span>))</span>
<span id="cb5-179"><a href="#cb5-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-180"><a href="#cb5-180" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb5-181"><a href="#cb5-181" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span>&nbsp;<span class="st">"translate("</span>&nbsp;<span class="op">+</span><span class="fu">&nbsp;</span>(offset)&nbsp;<span class="op">+</span>&nbsp;<span class="st">", "</span><span class="op">+</span> (height<span class="op">-</span>offset) <span class="op">+</span> <span class="st">" )"</span>)</span>
<span id="cb5-182"><a href="#cb5-182" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-opacity"</span><span class="op">,</span> <span class="fl">0.2</span>)</span>
<span id="cb5-183"><a href="#cb5-183" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="fl">0.5</span>)</span>
<span id="cb5-184"><a href="#cb5-184" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">call</span>(<span class="fu">gridX</span>()<span class="op">.</span><span class="fu">tickSize</span>(<span class="op">-</span>(height<span class="op">-</span>margin))</span>
<span id="cb5-185"><a href="#cb5-185" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">tickFormat</span>(<span class="st">""</span>))</span>
<span id="cb5-186"><a href="#cb5-186" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-187"><a href="#cb5-187" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb5-188"><a href="#cb5-188" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">datum</span>(data)</span>
<span id="cb5-189"><a href="#cb5-189" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb5-190"><a href="#cb5-190" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"darkblue"</span>)</span>
<span id="cb5-191"><a href="#cb5-191" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span>&nbsp;<span class="st">"translate("</span>&nbsp;<span class="op">+</span><span class="fu">&nbsp;</span>(offset)&nbsp;<span class="op">+</span>&nbsp;<span class="st">", "</span> <span class="op">+</span> offset <span class="op">+</span> <span class="st">")"</span>)</span>
<span id="cb5-192"><a href="#cb5-192" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="fl">1.5</span>)</span>
<span id="cb5-193"><a href="#cb5-193" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> <span class="kw">function</span>(d){</span>
<span id="cb5-194"><a href="#cb5-194" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fu">line</span>(d)</span>
<span id="cb5-195"><a href="#cb5-195" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb5-196"><a href="#cb5-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-197"><a href="#cb5-197" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()</span>
<span id="cb5-198"><a href="#cb5-198" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb5-199"><a href="#cb5-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-200"><a href="#cb5-200" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`Figure 3. Danish population growth from 1901 to 2022. Source: &lt;a href="https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3" target="new"&gt;Danish statistical service&lt;/a&gt;.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</section>
<section id="summary" class="level3">
<h3 class="anchored" data-anchor-id="summary">Summary</h3>
<p>Following the implementations above, I have already learned a lot about the different frameworks and their feel.</p>
<section id="developer-usability" class="level4">
<h4 class="anchored" data-anchor-id="developer-usability">Developer usability</h4>
<p>D3 Plot and Vega is by far the easiest to work with of the four. D3 Plot excels in simplicity and Vega make up for the complexity in documentation. Vega does suffer abit from not being able to inspect data in the output, e.g.&nbsp;when trying to work with <a href="https://vega.github.io/vega/docs/data/#format">parsing</a> the data format. The Vega-lite API suffer a bit from its superficial documentation and the lack of examples. Here I had to use the <code>toObject()</code> function to inspect the vega gramma output and then reverse engineer from common vega-lite and vega examples from the web. D3 has an impressive documentation, but also a very tedious workflow. The depth of the framework means that I had to combine multiple examples to make sure that I used the correct features (yeah, no, I’m not reading the documentation as the entry point).</p>
<p>In many ways, vega-lite api and vega are two different ways to produce the same output (quite literally). Here I favor vega-lite API as my approach.</p>
</section>
<section id="developer-investment" class="level4">
<h4 class="anchored" data-anchor-id="developer-investment">Developer investment</h4>
<p>D3 Plot require the least investment in my experience. The vega-lite API a bit more, but that is mainly due to the lack of examples. Vega (and vega-lite) require significant investment in getting used to the declarative gramme. D3 will require a significant investment in terms of understanding <em>how it works</em>. It feels like D3 suffer a bit from a ideomatic code style populated through the many examples by the author. There are a lot of small steps that are combined through its almost-declarative-dot notation.</p>
<p>I have a few open questions regarding the vega family regarding customizability that make me less reluctant to do the investment. D3 seems worthwhile the time if I had to do more complex visualisations, but the link between Observable Plot and D3 means that there is a nice transition between making something simple in Observable Plot to explore an idea and then moving to D3 for the crazy stuff. This might also be inherent in vega, as you can obviously do simple stuff. I am just a bit unsure <em>how vega deals with more custom and complex visualisations</em>.</p>
</section>
<section id="effeciency" class="level4">
<h4 class="anchored" data-anchor-id="effeciency">Effeciency</h4>
<p>Comparing the four on effeciency with a simple line chart is not a fair comparison. Still, Observable Plot wins hands down. Next is Vega-lite API, and then Vega. D3 is just <em>work</em> to get the result I want.</p>
</section>
<section id="customization" class="level4">
<h4 class="anchored" data-anchor-id="customization">Customization</h4>
<p>This is the inverse of <em>effeciency</em>. D3 not only have a lot of options (every option it feels like), there area also so many examples showcasing the possibilities. Vega also have a lot of options for customizability, but I kept hitting some issues when wanting to define custom ranges and ticks, so I remain a bit unsure here. Observable Plot and Vega-lite API seem to offer customization in terms of styling, but very little oppertunities for moving outside the particular visualization type.</p>
</section>
<section id="transparency" class="level4">
<h4 class="anchored" data-anchor-id="transparency">Transparency</h4>
<p>With Observable Plot and the Vega familily it is somewhat obvious what happens. D3 is another story. With D3 you need to know D3 to see what happens. The declarative nature of the Vega family make it a bit diffcault to use stdout and inspection to see what happens in the process. For instance, I could not find the <code>subtitle</code> in the vega visualisation and because vega is canvas based it is impossible to find it through inspecting the DOM. I dislike any framework the integrates wrangling and data work as a pattern because it obscures for a viewer how one move from the data to the visualization. However, that is more of a principle for the process than something that is enforced in the frameworks.</p>
</section>
<section id="visualisation-usability" class="level4">
<h4 class="anchored" data-anchor-id="visualisation-usability">Visualisation usability</h4>
<p>In the simple line graph example, all the frameworks produce usabile and readable graps without the need to address particular issues. Observable Plot do make it difficault to read the axies due to a small font-size. This can be changed through CSS, but will likely be a fiddly operation. <a href="https://talk.observablehq.com/t/label-font-size/2273/3">Why not have a font size configuration option?</a>. This might make me use Vega-lite for simple visualisations.</p>
</section>
<section id="visual-look" class="level4">
<h4 class="anchored" data-anchor-id="visual-look">Visual look</h4>
<p>Observable Plot (and D3 when spending time styling it) looks amazing (aside from the font issue). I dislike the label positions and font with the Vega graphs, but that can be solve using styling. And I guess when embedding the visualisations somewhere, one want the title and labels to fit the parent style. I know a lot can be done with <a href="https://github.com/vega/vega-embed">vega-embed</a>, but it seems silly to add a library for publishing the visualisation when I am already doing so in this notebook format.</p>
</section>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>For now, I do lean towards adopting Observable Plot as my quick-and-dirty plotting tool of choice and then take the time to learn D3 for the customization. I like the D3-family over the Vega family for four reasons:</p>
<ul>
<li><strong>Output</strong>: Working with SVG and the DOM (over canvas) seem like a stronger strategy for production, manipulation and customization. I can inspect everything in the DOM and use my knowledge from other front-end libraries and flows to learn and work with D3.</li>
<li><strong>Visuals</strong>: I immediately liked Observable Plot more than the Vega visualisations. I might even do a Observable Plot first and if needed make a D3 version and style it like the Observable Plot (with better font sizes).</li>
<li><strong>Inspectability</strong>: It <em>feels</em> like I can solve issues faster because I can combine the great documentation with simple techniques for inspecting the DOM, data, functions etc.</li>
<li><strong>Familial resemblance</strong>: The link between Observable Plot and D3 allow me to transition nicely from simple to complex. This might also be the case with the vega family, but my experience with a few issues does not make me confident in this.</li>
</ul>
<p>In my next post I will examine how to add interactivity to visualisations using the frameworks.</p>


</section>

</main> <!-- /main -->

<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"data = FileAttachment(\"/public/data/dk-population-1901-2022.csv\").csv({typed:true})\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"\nPlot.plot({\n    width:900,\n    height:400,\n    x: {\n        ticks: 10,\n        tickFormat: function(d){return \"\"+d},\n        domain: [1900, 2025],\n        grid: true\n    },\n    y: {\n        label: \"Population (in 1000s)\",\n        grid: true,\n        domain: [2000,6000]\n    },\n    caption: html`Figure 1. Danish population growth from 1901 to 2022. Source: <a href=\"https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3\" target=\"new\">Danish statistical service</a>.`,\n    marks: [\n        Plot.line(data, {x: \"year\", y: \"population\"}),\n    ]\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"import { vl } from \"@vega/vega-lite-api\"\n\nvl.markLine()\n    .data(data)\n    .title({\"text\": \"Figure 2: Danish population growth from 1901 to 2022.\", subtitle: 'Source: https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3' }).encode(\n    vl.x().fieldQ(\"year\").scale({\"domain\": [1900, 2025]}),\n    vl.y().fieldQ(\"population\").title(\"Population (1000s)\").scale({\"domain\": [2000, 6000]})\n).width(780).height(400).config({\n        axisX: {tickCount:10, formatType:\"number\", format:\"c\"},\n}).render({ renderer: \"svg\" })\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"vega = require(\"@observablehq/vega\")\nvega({\n  $schema: \"https://vega.github.io/schema/vega/v5.json\",\n  description: \"DK Population Growth 1901 - 2022\",\n  width: 780,\n  height: 400,\n  padding: 5,\n  title: \"Danish population growth from 1901 to 2022\",\n  subtitle: \"Source: https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3\",\n  data: [{name: \"DK Population 1901 - 2022\", values: data}],\n  axes: [\n      {orient: \"bottom\", scale: \"x\", values:Array.from({length: 13}, (x, i) => 1900 + i*10), grid: true},\n      {orient: \"left\", scale: \"y\", grid: true, title: \"Population (in 1000s)\"}\n  ],\n  scales: [\n      {\n          name: \"x\",\n          type: \"point\",\n          nice: \"year\",\n          range: \"width\",\n          domain: {data:\"DK Population 1901 - 2022\",field:\"year\"},\n          domainMin: 1900\n      },\n      {\n          name: \"y\",\n          type: \"linear\",\n          range: \"height\",\n          domain: {data:\"DK Population 1901 - 2022\",field:\"population\"},\n          domainMin: 2000,\n          domainMax: 6000\n      }\n\n  ],\n  marks: [\n      {\n          type: \"line\",\n          from: {data: \"DK Population 1901 - 2022\"},\n          encode: {\n              enter: {\n                  x: {scale: \"x\", field: \"year\"},\n                  y: {scale: \"y\", field: \"population\"},\n                  stoke: \"darkblue\",\n                  strokeWidth: {\"value\": 2}\n              }\n          }\n      }\n  ]\n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"linechart = {\n\n    const width = 900,height = 480, margin = 80, offset = margin/2\n\n    const xScale = d3.scaleLinear().domain([1900,2030]).range([0, width-margin]);\n    const yScale = d3.scaleLinear().domain([2000,6000]).range([height-margin, 0]);\n\n    const line = d3.line()\n    .x(function(d) {\n        return xScale(d.year);\n    })\n    .y(function(d) {\n        return yScale(d.population);\n    })\n\n    function gridY(){\n        return d3.axisLeft(yScale).ticks(10)\n    }\n\n    function gridX(){\n        return d3.axisBottom(xScale).ticks(10)\n    }\n\n    const svg = d3.create('svg')\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .attr(\"viewBox\", [0, 0, width, height])\n        .attr(\"style\", \"max-width: 100%; height: auto; height: intrinsic;\");\n\n    svg.append(\"g\")\n         .attr(\"transform\", \"translate(\"+offset+\",\" + (height-offset) + \")\")\n         .call(d3.axisBottom(xScale).tickFormat(function(d, i){\n            return d\n        }))\n\n    svg.append(\"g\")\n        .attr(\"transform\", \"translate(\" + (offset) + \", \"+ offset + \" )\")\n        .call(d3.axisLeft(yScale))\n        .call(g => g.append(\"text\")\n          .attr(\"x\", -offset)\n          .attr(\"y\", -20)\n          .attr(\"fill\", \"currentColor\")\n          .attr(\"text-anchor\", \"start\")\n          .attr(\"font-size\", \"1.5em\")\n          .text(\"Population (in 1000s)\"));\n    \n    svg.append(\"g\")\n        .attr(\"transform\", \"translate(\" + (offset) + \", \"+ offset + \" )\")\n        .attr(\"stroke-opacity\", 0.2)\n        .attr(\"stroke-width\", 0.5)\n        .call(gridY().tickSize(-(width-margin))\n          .tickFormat(\"\"))\n\n    svg.append(\"g\")\n        .attr(\"transform\", \"translate(\" + (offset) + \", \"+ (height-offset) + \" )\")\n        .attr(\"stroke-opacity\", 0.2)\n        .attr(\"stroke-width\", 0.5)\n        .call(gridX().tickSize(-(height-margin))\n          .tickFormat(\"\"))\n    \n    svg.append(\"path\")\n        .datum(data)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"darkblue\")\n        .attr(\"transform\", \"translate(\" + (offset) + \", \" + offset + \")\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", function(d){\n            return line(d)\n        });\n\n    return svg.node()\n} \n\nhtml`Figure 3. Danish population growth from 1901 to 2022. Source: <a href=\"https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3\" target=\"new\">Danish statistical service</a>.`\n"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../../things";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://hci.social/web/@heenrik">
      <i class="bi bi-mastodon" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:korsgaard@protonmail.com?Subject=I%20saw%20your%20website...">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/henrikkorsgaard">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
      </div>
  </div>
</footer>



</body></html>