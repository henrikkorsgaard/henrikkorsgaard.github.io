<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Henrik Korsgaard - Comparing Observable Plot, Vega-lite API and D3 on Interactivity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="module" src="../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="../css/styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../" class="navbar-brand navbar-brand-logo">
    <img src="../public/images/henrik-transparent.png" alt="" class="navbar-logo">
    </a>
  </div>
          <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../notes.html">
 <span class="menu-text">NOTES</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../things.html">
 <span class="menu-text">THINGS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html">
 <span class="menu-text">RESEARCH</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">ABOUT</span></a>
  </li>  
</ul>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Comparing Observable Plot, Vega-lite API and D3 on Interactivity</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This is a continuation of <a href="../notes/comparing-d3plot-vegalite-d3.html"><em>me trying to figure out which library to use for information visualization</em></a>. In this note I will look at how a few common visualization libraries – <a href="https://github.com/observablehq/plot">Observable Plot</a>, <a href="https://github.com/vega/vega">vega</a> and <a href="https://d3js.org/">D3</a> – support interaction. I skipped Vega-lite API from my last post because it proved very difficault for me to make visualizations due to the state of the documentation, examples and my lack of familiarity with Vega.</p>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb1" data-startfrom="8" data-syntax-error-position="291" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 7;"><span id="cb1-8"><a href="#cb1-8"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">//| output: false</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>raw <span class="op">=</span> <span class="fu">FileAttachment</span><span class="op">(</span><span class="st">"/public/data/dk-births-1901-2022.csv"</span><span class="op">).</span><span class="fu">csv</span><span class="op">({</span>typed<span class="op">:</span><span class="kw">true</span><span class="op">})</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>data <span class="op">=</span> raw<span class="op">.</span><span class="fu">map</span><span class="op">(</span><span class="fu">function</span><span class="op">(</span>el<span class="op">){</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>    console<span class="op">.</span><span class="fu">log</span><span class="op">(</span>el<span class="op">)</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>    <span class="cf">return</span> <span class="op">[{</span>year<span class="op">:</span>el<span class="op">.</span><span class="fu">year</span><span class="op">,</span> type<span class="op">:</span><span class="st">"levendefødte drenge"</span><span class="op">,</span> value<span class="op">:</span> el<span class="op">[</span><span class="st">"levendefødte drenge"</span><span class="op">]},{</span>year<span class="op">:</span>el<span class="op">.</span><span class="fu">year</span><span class="op">,</span> type<span class="op">:</span><span class="st">"levendefødte piger"</span><span class="op">,</span> value<span class="op">:</span> el<span class="op">[</span><span class="st">"levendefødte piger"</span><span class="op">],{</span>year<span class="op">:</span>el<span class="op">.</span><span class="fu">year</span><span class="op">,</span> type<span class="op">:</span><span class="st">"fødte uden for ægteskab"</span><span class="op">,</span> value<span class="op">:</span> el<span class="op">[</span><span class="st">"fødte uden for ægteskab"</span><span class="op">]}]</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="op">}).</span><span class="fu">flat</span><span class="op">()</span></span>
<span id="cb1-15"><a href="#cb1-15"></a></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co">//console.log(data)</span></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co">/*</span></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="co">raw.forEach( el =&gt; {</span></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="co">    console.log(Object.keys(el))</span></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="co">})</span></span>
<span id="cb1-21"><a href="#cb1-21"></a></span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="co">console.log(data)</span></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="co">*/</span></span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="co">//Target should be {type:}</span></span>
<span id="cb1-25"><a href="#cb1-25"></a></span>
<span id="cb1-26"><a href="#cb1-26"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
OJS Syntax Error (line 13, column 164)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<section id="observable-plot" class="level3">
<h3 class="anchored" data-anchor-id="observable-plot">Observable Plot</h3>
<p>… does not seem to have any features supporting interactivity, but let’s plot the data to get an overview and become a bit more familiar with the API. Turns out, it is not as usable as I initially experienced. The color/legend implementation does not fit my data<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" data-startfrom="30" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 29;"><span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span><span class="dv">800</span><span class="op">,</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span><span class="dv">400</span><span class="op">,</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="dt">ticks</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        <span class="dt">tickFormat</span><span class="op">:</span> <span class="kw">function</span>(d){<span class="cf">return</span> <span class="st">""</span><span class="op">+</span>d}<span class="op">,</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        <span class="dt">domain</span><span class="op">:</span> [<span class="dv">1900</span><span class="op">,</span> <span class="dv">2025</span>]<span class="op">,</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>        <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>        <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="dt">type</span><span class="op">:</span> <span class="st">"categorical"</span><span class="op">,</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>        <span class="dt">scheme</span><span class="op">:</span> <span class="st">"tableau10"</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>        <span class="dt">label</span><span class="op">:</span> <span class="st">"Births"</span><span class="op">,</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>        <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">caption</span><span class="op">:</span> <span class="fu">html</span><span class="vs">`Figure 1. Danish births from 1901 - 2022. Source: &lt;a href="https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3" target="new"&gt;Danish statistical service&lt;/a&gt;.`</span><span class="op">,</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">line</span>(data<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"levendefødte drenge"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"ckey1"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span> </span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">line</span>(data<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"levendefødte piger"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"ckey2"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>        Plot<span class="op">.</span><span class="fu">line</span>(data<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"fødte uden for ægteskab"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"ckey3"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})<span class="op">,</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="vega" class="level3">
<h3 class="anchored" data-anchor-id="vega">Vega</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" data-startfrom="64" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 63;"><span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>vega <span class="op">=</span> <span class="pp">require</span>(<span class="st">"@observablehq/vega"</span>)</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="fu">vega</span>({</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>    <span class="dt">$schema</span><span class="op">:</span> <span class="st">"https://vega.github.io/schema/vega/v5.json"</span><span class="op">,</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">description</span><span class="op">:</span> <span class="st">"DK Population Growth 1901 - 2022"</span><span class="op">,</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">760</span><span class="op">,</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>    <span class="dt">padding</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>    <span class="dt">title</span><span class="op">:</span> <span class="st">"Danish population growth from 1901 to 2022"</span><span class="op">,</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>    <span class="dt">subtitle</span><span class="op">:</span> <span class="st">"Source: https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3"</span><span class="op">,</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>    <span class="dt">data</span><span class="op">:</span> [{<span class="dt">name</span><span class="op">:</span> <span class="st">"DK Population 1901 - 2022"</span><span class="op">,</span> <span class="dt">values</span><span class="op">:</span> data}]<span class="op">,</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>    <span class="dt">axes</span><span class="op">:</span> [</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>        {<span class="dt">orient</span><span class="op">:</span> <span class="st">"bottom"</span><span class="op">,</span> <span class="dt">scale</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">values</span><span class="op">:</span><span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">13</span>}<span class="op">,</span> (x<span class="op">,</span> i) <span class="kw">=&gt;</span> <span class="dv">1900</span> <span class="op">+</span> i<span class="op">*</span><span class="dv">10</span>)<span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>        {<span class="dt">orient</span><span class="op">:</span> <span class="st">"left"</span><span class="op">,</span> <span class="dt">scale</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">title</span><span class="op">:</span> <span class="st">"Population (in 1000s)"</span>}</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>    <span class="dt">scales</span><span class="op">:</span> [</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>            <span class="dt">name</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"point"</span><span class="op">,</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>            <span class="dt">nice</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>            <span class="dt">range</span><span class="op">:</span> <span class="st">"width"</span><span class="op">,</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>            <span class="dt">domain</span><span class="op">:</span> {<span class="dt">data</span><span class="op">:</span><span class="st">"DK Population 1901 - 2022"</span><span class="op">,</span><span class="dt">field</span><span class="op">:</span><span class="st">"year"</span>}<span class="op">,</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>            <span class="dt">domainMin</span><span class="op">:</span> <span class="dv">1900</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>            <span class="dt">name</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"linear"</span><span class="op">,</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>            <span class="dt">range</span><span class="op">:</span> <span class="st">"height"</span><span class="op">,</span></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>            <span class="dt">domain</span><span class="op">:</span> {<span class="dt">data</span><span class="op">:</span><span class="st">"DK Population 1901 - 2022"</span><span class="op">,</span><span class="dt">field</span><span class="op">:</span><span class="st">"levendefødte drenge"</span>}<span class="op">,</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>            <span class="dt">domainMin</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>            <span class="dt">domainMax</span><span class="op">:</span> <span class="dv">50000</span></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"line"</span><span class="op">,</span></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>            <span class="dt">from</span><span class="op">:</span> {<span class="dt">data</span><span class="op">:</span> <span class="st">"DK Population 1901 - 2022"</span>}<span class="op">,</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>            <span class="dt">encode</span><span class="op">:</span> {</span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>                <span class="dt">enter</span><span class="op">:</span> {</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">x</span><span class="op">:</span> {<span class="dt">scale</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">field</span><span class="op">:</span> <span class="st">"year"</span>}<span class="op">,</span></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">y</span><span class="op">:</span> {<span class="dt">scale</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">field</span><span class="op">:</span> <span class="st">"levendefødte drenge"</span>}<span class="op">,</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">stroke</span><span class="op">:</span> {<span class="st">"value"</span><span class="op">:</span> <span class="st">"#d7191c"</span>}<span class="op">,</span></span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">strokeWidth</span><span class="op">:</span> {<span class="st">"value"</span><span class="op">:</span> <span class="dv">2</span>}</span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"line"</span><span class="op">,</span></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>            <span class="dt">from</span><span class="op">:</span> {<span class="dt">data</span><span class="op">:</span> <span class="st">"DK Population 1901 - 2022"</span>}<span class="op">,</span></span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>            <span class="dt">encode</span><span class="op">:</span> {</span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>                <span class="dt">enter</span><span class="op">:</span> {</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">x</span><span class="op">:</span> {<span class="dt">scale</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">field</span><span class="op">:</span> <span class="st">"year"</span>}<span class="op">,</span></span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">y</span><span class="op">:</span> {<span class="dt">scale</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">field</span><span class="op">:</span> <span class="st">"levendefødte piger"</span>}<span class="op">,</span></span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">stroke</span><span class="op">:</span> {<span class="st">"value"</span><span class="op">:</span> <span class="st">"#2C7BB6"</span>}<span class="op">,</span></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">strokeWidth</span><span class="op">:</span> {<span class="st">"value"</span><span class="op">:</span> <span class="dv">2</span>}</span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>            <span class="dt">type</span><span class="op">:</span> <span class="st">"line"</span><span class="op">,</span></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>            <span class="dt">from</span><span class="op">:</span> {<span class="dt">data</span><span class="op">:</span> <span class="st">"DK Population 1901 - 2022"</span>}<span class="op">,</span></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>            <span class="dt">encode</span><span class="op">:</span> {</span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>                <span class="dt">enter</span><span class="op">:</span> {</span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">x</span><span class="op">:</span> {<span class="dt">scale</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">field</span><span class="op">:</span> <span class="st">"year"</span>}<span class="op">,</span></span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">y</span><span class="op">:</span> {<span class="dt">scale</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">field</span><span class="op">:</span> <span class="st">"fødte uden for ægteskab"</span>}<span class="op">,</span></span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">stroke</span><span class="op">:</span> {<span class="st">"value"</span><span class="op">:</span> <span class="st">"#4dac26"</span>}<span class="op">,</span></span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">strokeWidth</span><span class="op">:</span> {<span class="st">"value"</span><span class="op">:</span> <span class="dv">2</span>}</span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-2" data-nodetype="expression">

</div>
</div>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Given a csv file and wanting to plot individual colums, you need to add consistent keys in order to make the legend/color assignment work. I dislike libraries that force you to wrangle commonly organized data to fit its oddities. This makes me want to avoid Observable Plot in the future<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->

<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"\nPlot.plot({\n    width:800,\n    height:400,\n    marginLeft: 50, \n    x: {\n        ticks: 10,\n        tickFormat: function(d){return \"\"+d},\n        domain: [1900, 2025],\n        grid: true\n    },\n    color: {\n        legend: true,\n        type: \"categorical\",\n        scheme: \"tableau10\"\n\n    },\n    y: {\n        label: \"Births\",\n        grid: true\n    },\n    caption: html`Figure 1. Danish births from 1901 - 2022. Source: <a href=\"https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3\" target=\"new\">Danish statistical service</a>.`,\n    marks: [\n        Plot.line(data, {x: \"year\", y: \"levendefødte drenge\", stroke: \"ckey1\", strokeWidth: 2}), \n        Plot.line(data, {x: \"year\", y: \"levendefødte piger\", stroke: \"ckey2\", strokeWidth: 2}),\n        Plot.line(data, {x: \"year\", y: \"fødte uden for ægteskab\", stroke: \"ckey3\", strokeWidth: 2}),\n    ]\n})\n\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"vega = require(\"@observablehq/vega\")\n\nvega({\n    $schema: \"https://vega.github.io/schema/vega/v5.json\",\n    description: \"DK Population Growth 1901 - 2022\",\n    width: 760,\n    height: 400,\n    padding: 5,\n    title: \"Danish population growth from 1901 to 2022\",\n    subtitle: \"Source: https://www.statistikbanken.dk/statbank5a/SelectVarVal/Define.asp?MainTable=HISB3\",\n    data: [{name: \"DK Population 1901 - 2022\", values: data}],\n    axes: [\n        {orient: \"bottom\", scale: \"x\", values:Array.from({length: 13}, (x, i) => 1900 + i*10), grid: true},\n        {orient: \"left\", scale: \"y\", grid: true, title: \"Population (in 1000s)\"}\n    ],\n    scales: [\n        {\n            name: \"x\",\n            type: \"point\",\n            nice: \"year\",\n            range: \"width\",\n            domain: {data:\"DK Population 1901 - 2022\",field:\"year\"},\n            domainMin: 1900\n        },\n        {\n            name: \"y\",\n            type: \"linear\",\n            range: \"height\",\n            domain: {data:\"DK Population 1901 - 2022\",field:\"levendefødte drenge\"},\n            domainMin: 0,\n            domainMax: 50000\n        }\n    ],\n    marks: [\n        {\n            type: \"line\",\n            from: {data: \"DK Population 1901 - 2022\"},\n            encode: {\n                enter: {\n                    x: {scale: \"x\", field: \"year\"},\n                    y: {scale: \"y\", field: \"levendefødte drenge\"},\n                    stroke: {\"value\": \"#d7191c\"},\n                    strokeWidth: {\"value\": 2}\n                }\n            }\n        },\n        {\n            type: \"line\",\n            from: {data: \"DK Population 1901 - 2022\"},\n            encode: {\n                enter: {\n                    x: {scale: \"x\", field: \"year\"},\n                    y: {scale: \"y\", field: \"levendefødte piger\"},\n                    stroke: {\"value\": \"#2C7BB6\"},\n                    strokeWidth: {\"value\": 2}\n                }\n            }\n        },\n        {\n            type: \"line\",\n            from: {data: \"DK Population 1901 - 2022\"},\n            encode: {\n                enter: {\n                    x: {scale: \"x\", field: \"year\"},\n                    y: {scale: \"y\", field: \"fødte uden for ægteskab\"},\n                    stroke: {\"value\": \"#4dac26\"},\n                    strokeWidth: {\"value\": 2}\n                }\n            }\n        }\n    ]\n})\n\n"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../../notes";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://hci.social/web/@heenrik">
      <i class="bi bi-mastodon" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:korsgaard@protonmail.com?Subject=I%20saw%20your%20website...">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/henrikkorsgaard">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
      </div>
  </div>
</footer>



</body></html>